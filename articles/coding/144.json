{
  "id": "144",
  "title": "获取 Let's Encrypt 免费证书，并配置到 Nginx",
  "type": "de",
  "text": "```\napt-get install letsencrypt\n```\n\n```\nletsencrypt certonly --webroot -w /home/git/mouto.org-171218/ -d mouto.org -d www.mouto.org\n```\n\n遇到错误\n\n```\nFailed authorization procedure. mouto.org (http-01): urn:acme:error:unauthorized :: The client lacks sufficient authorization :: Invalid response from http://mouto.org/.well-known/acme-challenge/wWLQHrG2xlYYjEpT_ju5AydOabJRVWmQbl5YoP123DQ: \"<!DOCTYPE html><meta charset=\"UTF-8\"><title>404</title><style>h1{padding:1em 0;font-size:6em;font-weight:200;text-align:center;}\", www.mouto.org (http-01): urn:acme:error:unauthorized :: The client lacks sufficient authorization :: Invalid response from http://www.mouto.org/.well-known/acme-challenge/fDwl8DPvs-BmHi1h6e_i7njfPmkD6vMBxkbE2YMTld4: \"<!DOCTYPE html><meta charset=\"UTF-8\"><title>404</title><style>h1{padding:1em 0;font-size:6em;font-weight:200;text-align:center;}\"\n\nIMPORTANT NOTES:\n - The following errors were reported by the server:\n\n   Domain: mouto.org\n   Type:   unauthorized\n   Detail: Invalid response from http://mouto.org/.well-known/acme-\n   challenge/wWLQHrG2xlYYjEpT_ju5AydOabJRVWmQbl5YoP123DQ: \"<!DOCTYPE\n   html><meta charset=\"UTF-8\"><title>404</title><style>h1{padding:1em\n   0;font-size:6em;font-weight:200;text-align:center;}\"\n\n   Domain: www.mouto.org\n   Type:   unauthorized\n   Detail: Invalid response from http://www.mouto.org/.well-known\n   /acme-challenge/fDwl8DPvs-BmHi1h6e_i7njfPmkD6vMBxkbE2YMTld4:\n   \"<!DOCTYPE html><meta\n   charset=\"UTF-8\"><title>404</title><style>h1{padding:1em 0;font-\n   size:6em;font-weight:200;text-align:center;}\"\n\n   To fix these errors, please make sure that your domain name was\n   entered correctly and the DNS A record(s) for that domain\n   contain(s) the right IP address.\n```\n\n认证失败，看到参数里有目录信息，估计是在目录下写了特定文件来验证域名所有权\n在 nginx 对应网站 conf 配置上添加\n```\nlocation ^~ /.well-known/ {\n\troot /home/git/mouto.org-171218/;\n}\n```\n\n重试 成功\n```\nIMPORTANT NOTES:\n - Congratulations! Your certificate and chain have been saved at\n   /etc/letsencrypt/live/mouto.org/fullchain.pem. Your cert will\n   expire on 2018-03-26. To obtain a new version of the certificate in\n   the future, simply run Let's Encrypt again.\n - If you like Let's Encrypt, please consider supporting our work by:\n\n   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le\n```\n\n在 Nginx 对应 Server 段，添加证书公钥私钥\n\n```\nssl on;\nssl_certificate /etc/letsencrypt/live/mouto.org/fullchain.pem;\nssl_certificate_key /etc/letsencrypt/live/mouto.org/privkey.pem;\n```",
  "click": 0,
  "star": 0,
  "status": 1,
  "created": 1514484771,
  "modified": 1516767783,
  "images": []
}